$(()=>{new TodosController($(".task-list"))});class TodosController{constructor(t){this._todosListView=new TodosListView({onToggle:t=>this.toggleTodo(t),onDelete:t=>this.removeTodo(t)}),t.append(this._todosListView.$el),this._todosList=new TodosCollection,this._todosList.fetchList().then(()=>this._todosListView.renderList(this._todosList.list)),this._todoForm=new TodoFormViem({onAdd:t=>this.addTodo(t)})}addTodo(t){this._todosList.addTodo(t).then(()=>this._todosListView.renderList(this._todosList.list))}toggleTodo(t){this._todosList.toggleTodo(t),this._todosListView.renderList(this._todosList.list)}removeTodo(t){this._todosList.removeTodo(t),this._todosListView.renderList(this._todosList.list)}}const TODOS_URL="https://5dd3d5ba8b5e080014dc4bfa.mockapi.io/todos/";class TodosCollection{constructor(){this.list=[]}fetchList(){return fetch(TODOS_URL).then(t=>t.json()).then(t=>this.list=t)}addTodo(t){return fetch(TODOS_URL,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>this.list.push(t))}toggleTodo(o){const t=this.list.find(({id:t})=>t==o);if(!t)return console.error("Id not found",o);t.isDone=!t.isDone,fetch(TODOS_URL+o,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}removeTodo(o){this.list=this.list.filter(({id:t})=>t!=o),fetch(TODOS_URL+o,{method:"DELETE"})}}class TodoFormViem{static FORM_ID="#addTaskForm";static INPUT_ID="#taskNameInput";constructor(s={}){this._form=$(TodoFormViem.FORM_ID).on("submit",t=>{t.preventDefault();const o=$(TodoFormViem.INPUT_ID);s.onAdd&&s.onAdd({title:o.val()}),o.val("")})}}class TodosListView{static LIST_TEMPLATE='<div id="taskList" class="task-list u-full-width"></div>';static LIST_ITEM_TEMPLATE=`<div class="task-item u-full-width {{doneClass}}" data-id="{{id}}">
        {{title}}
        <span class="delete-btn">âœ˜</span>
    </div>`;static TASK_SELECTOR=".task-item";static TASK_DELETE_SELECTOR=".delete-btn";static TASK_DONE_CLASS="done";static createItemElement(t){return $(TodosListView.LIST_ITEM_TEMPLATE.replace("{{id}}",t.id).replace("{{title}}",t.title).replace("{{doneClass}}",t.isDone?TodosListView.TASK_DONE_CLASS:""))}constructor(o={}){this.$el=$(TodosListView.LIST_TEMPLATE).on("click",TodosListView.TASK_SELECTOR,t=>o.onToggle&&o.onToggle($(t.target).data("id"))).on("click",TodosListView.TASK_DELETE_SELECTOR,t=>{t.stopPropagation(),o.onDelete&&o.onDelete($(t.target).closest(TodosListView.TASK_SELECTOR).data("id"))})}renderList(t){this.$el.empty(),this.$el.append(t.map(TodosListView.createItemElement))}}